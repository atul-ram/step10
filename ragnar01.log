2017-04-02 17:57:38,966 p=17840 u=root |  Using /root/tst1/step10/ansible.cfg as config file
2017-04-02 17:57:39,379 p=17840 u=root |  1 plays in example3.yml
2017-04-02 17:57:39,519 p=17840 u=root |  PLAY [zabbix installation  playbook] *******************************************
2017-04-02 17:57:39,707 p=17840 u=root |  TASK [zabbix : install sysstat rpm] ********************************************
2017-04-02 17:57:39,709 p=17840 u=root |  task path: /root/tst1/step10/roles/zabbix/tasks/main.yml:2
2017-04-02 17:57:43,224 p=17840 u=root |  ok: [ragnar01] => {"changed": false, "invocation": {"module_args": {"conf_file": null, "disable_gpg_check": false, "disablerepo": null, "enablerepo": null, "exclude": null, "install_repoquery": true, "list": null, "name": ["sysstat"], "state": "present", "update_cache": false}, "module_name": "yum"}, "msg": "", "rc": 0, "results": ["sysstat-10.1.5-7.el7.x86_64 providing sysstat is already installed"]}
2017-04-02 17:57:43,239 p=17840 u=root |  TASK [zabbix : start dependent service] ****************************************
2017-04-02 17:57:43,240 p=17840 u=root |  task path: /root/tst1/step10/roles/zabbix/tasks/main.yml:8
2017-04-02 17:57:45,420 p=17840 u=root |  ok: [ragnar01] => {"changed": false, "enabled": true, "invocation": {"module_args": {"arguments": "", "enabled": true, "name": "sysstat", "pattern": null, "runlevel": "default", "sleep": null, "state": "started"}, "module_name": "service"}, "name": "sysstat", "state": "started"}
2017-04-02 17:57:45,435 p=17840 u=root |  TASK [zabbix : users | managing user accounts] *********************************
2017-04-02 17:57:45,436 p=17840 u=root |  task path: /root/tst1/step10/roles/zabbix/tasks/main.yml:14
2017-04-02 17:57:47,994 p=17840 u=root |  changed: [ragnar01] => (item={u'comment': u'zabbix service account', u'state': u'present', u'sudo': True, u'user': u'zabbix', u'pass': u'z@bb1xhijkill'}) => {"append": false, "changed": true, "comment": "zabbix service account", "group": 1001, "home": "/home/zabbix", "invocation": {"module_args": {"append": false, "comment": "zabbix service account", "createhome": true, "expires": null, "force": false, "generate_ssh_key": null, "group": null, "groups": null, "home": null, "login_class": null, "move_home": false, "name": "zabbix", "non_unique": false, "password": "VALUE_SPECIFIED_IN_NO_LOG_PARAMETER", "remove": false, "shell": null, "skeleton": null, "ssh_key_bits": "2048", "ssh_key_comment": "ansible-generated on localhost.localdomain", "ssh_key_file": null, "ssh_key_passphrase": null, "ssh_key_type": "rsa", "state": "present", "system": false, "uid": null, "update_password": "always"}, "module_name": "user"}, "item": {"comment": "zabbix service account", "pass": "z@bb1xhijkill", "state": "present", "sudo": true, "user": "zabbix"}, "move_home": false, "name": "zabbix", "password": "NOT_LOGGING_PASSWORD", "shell": "/bin/bash", "state": "present", "uid": 1001}
2017-04-02 17:57:48,002 p=17840 u=root |  TASK [zabbix : users | adding users to sudoers] ********************************
2017-04-02 17:57:48,003 p=17840 u=root |  task path: /root/tst1/step10/roles/zabbix/tasks/main.yml:26
2017-04-02 17:57:50,379 p=17840 u=root |  ok: [ragnar01] => (item={u'comment': u'zabbix service account', u'state': u'present', u'sudo': True, u'user': u'zabbix', u'pass': u'z@bb1xhijkill'}) => {"backup": "", "changed": false, "invocation": {"module_args": {"backrefs": false, "backup": false, "content": null, "create": false, "delimiter": null, "dest": "/etc/sudoers", "directory_mode": null, "follow": false, "force": null, "group": null, "insertafter": "^root", "insertbefore": null, "line": "zabbix  ALL= NOPASSWD : /usr/bin/tailf, /bin/cat, /bin/grep,/bin/awk, /bin/sed, /usr/local/sbin/zabbix_sender, /usr/bin/tr,  /usr/sbin/dmidecode, /usr/bin/lsattr, /bin/ls", "mode": null, "owner": null, "regexp": null, "remote_src": null, "selevel": null, "serole": null, "setype": null, "seuser": null, "src": null, "state": "present", "validate": "visudo -cf %s"}, "module_name": "lineinfile"}, "item": {"comment": "zabbix service account", "pass": "z@bb1xhijkill", "state": "present", "sudo": true, "user": "zabbix"}, "msg": ""}
2017-04-02 17:57:50,390 p=17840 u=root |  TASK [zabbix : command to extend password aging of zabbix user] ****************
2017-04-02 17:57:50,390 p=17840 u=root |  task path: /root/tst1/step10/roles/zabbix/tasks/main.yml:38
2017-04-02 17:57:51,328 p=17840 u=root |  ok: [ragnar01] => {"changed": false, "invocation": {"module_args": {"_raw_params": "chage -I -1 -m 0 -M 99999 -E -1 zabbix"}, "module_name": "raw"}, "rc": 0, "stderr": "", "stdout": "", "stdout_lines": []}
2017-04-02 17:57:51,341 p=17840 u=root |  TASK [zabbix : copy scripts to /etc/zabbix folder] *****************************
2017-04-02 17:57:51,343 p=17840 u=root |  task path: /root/tst1/step10/roles/zabbix/tasks/main.yml:41
2017-04-02 17:58:32,953 p=17840 u=root |  ok: [ragnar01] => {"changed": false, "dest": "/etc/zabbix/", "invocation": {"module_args": {"backup": true, "dest": "/etc/zabbix/", "group": "zabbix", "mode": 493, "owner": "zabbix", "src": "files/script"}, "module_name": "copy"}, "src": "/root/tst1/step10/roles/zabbix/files/script"}
2017-04-02 17:58:32,962 p=17840 u=root |  TASK [zabbix : copy executables to /usr/local/sbin/ folder] ********************
2017-04-02 17:58:32,963 p=17840 u=root |  task path: /root/tst1/step10/roles/zabbix/tasks/main.yml:50
2017-04-02 17:58:50,372 p=17840 u=root |  ok: [ragnar01] => (item={u'dest': u'/usr/local/sbin/zabbix_sender', u'file': u'zabbix_sender'}) => {"changed": false, "checksum": "e90a7f972e6f3d423b87684d9ed53bcf52df5b4f", "dest": "/usr/local/sbin/zabbix_sender", "gid": 1001, "group": "zabbix", "invocation": {"module_args": {"backup": true, "content": null, "delimiter": null, "dest": "/usr/local/sbin/zabbix_sender", "diff_peek": null, "directory_mode": null, "follow": false, "force": false, "group": "zabbix", "mode": 493, "original_basename": "zabbix_sender", "owner": "zabbix", "path": "/usr/local/sbin/zabbix_sender", "recurse": false, "regexp": null, "remote_src": null, "selevel": null, "serole": null, "setype": null, "seuser": null, "src": "zabbix_sender", "state": null, "validate": null}}, "item": {"dest": "/usr/local/sbin/zabbix_sender", "file": "zabbix_sender"}, "mode": "0755", "owner": "zabbix", "path": "/usr/local/sbin/zabbix_sender", "secontext": "system_u:object_r:bin_t:s0", "size": 90768, "state": "file", "uid": 1001}
2017-04-02 17:58:50,420 p=17840 u=root |  ok: [ragnar01] => (item={u'dest': u'/usr/local/sbin/zabbix_agent', u'file': u'zabbix_agent'}) => {"changed": false, "checksum": "15769fd636a326b008cdfc2dca621f1f4f0ff756", "dest": "/usr/local/sbin/zabbix_agent", "gid": 1001, "group": "zabbix", "invocation": {"module_args": {"backup": true, "content": null, "delimiter": null, "dest": "/usr/local/sbin/zabbix_agent", "diff_peek": null, "directory_mode": null, "follow": false, "force": false, "group": "zabbix", "mode": 493, "original_basename": "zabbix_agent", "owner": "zabbix", "path": "/usr/local/sbin/zabbix_agent", "recurse": false, "regexp": null, "remote_src": null, "selevel": null, "serole": null, "setype": null, "seuser": null, "src": "zabbix_agent", "state": null, "validate": null}}, "item": {"dest": "/usr/local/sbin/zabbix_agent", "file": "zabbix_agent"}, "mode": "0755", "owner": "zabbix", "path": "/usr/local/sbin/zabbix_agent", "secontext": "system_u:object_r:bin_t:s0", "size": 190784, "state": "file", "uid": 1001}
2017-04-02 17:58:50,446 p=17840 u=root |  ok: [ragnar01] => (item={u'dest': u'/usr/local/sbin/zabbix_agentd', u'file': u'zabbix_agentd'}) => {"changed": false, "checksum": "46a15c544a15c0e0f9aa731a6a84e85a9f0d2fcb", "dest": "/usr/local/sbin/zabbix_agentd", "gid": 1001, "group": "zabbix", "invocation": {"module_args": {"backup": true, "content": null, "delimiter": null, "dest": "/usr/local/sbin/zabbix_agentd", "diff_peek": null, "directory_mode": null, "follow": false, "force": false, "group": "zabbix", "mode": 493, "original_basename": "zabbix_agentd", "owner": "zabbix", "path": "/usr/local/sbin/zabbix_agentd", "recurse": false, "regexp": null, "remote_src": null, "selevel": null, "serole": null, "setype": null, "seuser": null, "src": "zabbix_agentd", "state": null, "validate": null}}, "item": {"dest": "/usr/local/sbin/zabbix_agentd", "file": "zabbix_agentd"}, "mode": "0755", "owner": "zabbix", "path": "/usr/local/sbin/zabbix_agentd", "secontext": "system_u:object_r:bin_t:s0", "size": 222840, "state": "file", "uid": 1001}
2017-04-02 17:58:50,481 p=17840 u=root |  ok: [ragnar01] => (item={u'dest': u'/usr/local/sbin/zabbix_get', u'file': u'zabbix_get'}) => {"changed": false, "checksum": "39f9f0cffaae4dd12357ce71afde34e968989749", "dest": "/usr/local/sbin/zabbix_get", "gid": 1001, "group": "zabbix", "invocation": {"module_args": {"backup": true, "content": null, "delimiter": null, "dest": "/usr/local/sbin/zabbix_get", "diff_peek": null, "directory_mode": null, "follow": false, "force": false, "group": "zabbix", "mode": 493, "original_basename": "zabbix_get", "owner": "zabbix", "path": "/usr/local/sbin/zabbix_get", "recurse": false, "regexp": null, "remote_src": null, "selevel": null, "serole": null, "setype": null, "seuser": null, "src": "zabbix_get", "state": null, "validate": null}}, "item": {"dest": "/usr/local/sbin/zabbix_get", "file": "zabbix_get"}, "mode": "0755", "owner": "zabbix", "path": "/usr/local/sbin/zabbix_get", "secontext": "system_u:object_r:bin_t:s0", "size": 75696, "state": "file", "uid": 1001}
2017-04-02 17:58:50,524 p=17840 u=root |  ok: [ragnar01] => (item={u'dest': u'/usr/local/bin/zabagentstart', u'file': u'zabagstrt'}) => {"changed": false, "checksum": "7629bef3991846821ce63ad5dd371f74c4f7a50f", "dest": "/usr/local/bin/zabagentstart", "gid": 1001, "group": "zabbix", "invocation": {"module_args": {"backup": true, "content": null, "delimiter": null, "dest": "/usr/local/bin/zabagentstart", "diff_peek": null, "directory_mode": null, "follow": false, "force": false, "group": "zabbix", "mode": 493, "original_basename": "zabagstrt", "owner": "zabbix", "path": "/usr/local/bin/zabagentstart", "recurse": false, "regexp": null, "remote_src": null, "selevel": null, "serole": null, "setype": null, "seuser": null, "src": "zabagstrt", "state": null, "validate": null}}, "item": {"dest": "/usr/local/bin/zabagentstart", "file": "zabagstrt"}, "mode": "0755", "owner": "zabbix", "path": "/usr/local/bin/zabagentstart", "secontext": "system_u:object_r:bin_t:s0", "size": 92, "state": "file", "uid": 1001}
2017-04-02 17:58:50,554 p=17840 u=root |  ok: [ragnar01] => (item={u'dest': u'/usr/local/bin/zabagentstop', u'file': u'zabagstop'}) => {"changed": false, "checksum": "7359d72e1c0c768114456418236f8c0b78727d3a", "dest": "/usr/local/bin/zabagentstop", "gid": 1001, "group": "zabbix", "invocation": {"module_args": {"backup": true, "content": null, "delimiter": null, "dest": "/usr/local/bin/zabagentstop", "diff_peek": null, "directory_mode": null, "follow": false, "force": false, "group": "zabbix", "mode": 493, "original_basename": "zabagstop", "owner": "zabbix", "path": "/usr/local/bin/zabagentstop", "recurse": false, "regexp": null, "remote_src": null, "selevel": null, "serole": null, "setype": null, "seuser": null, "src": "zabagstop", "state": null, "validate": null}}, "item": {"dest": "/usr/local/bin/zabagentstop", "file": "zabagstop"}, "mode": "0755", "owner": "zabbix", "path": "/usr/local/bin/zabagentstop", "secontext": "system_u:object_r:bin_t:s0", "size": 55, "state": "file", "uid": 1001}
2017-04-02 17:58:50,574 p=17840 u=root |  TASK [zabbix : copy and edit conf file as per input vars] **********************
2017-04-02 17:58:50,575 p=17840 u=root |  task path: /root/tst1/step10/roles/zabbix/tasks/main.yml:61
2017-04-02 17:58:54,075 p=17840 u=root |  changed: [ragnar01] => {"changed": true, "checksum": "8fbc8fd20bf53fa934a2add63916e155fba33d2b", "dest": "/etc/zabbix/zabbix_agentd.conf", "gid": 1001, "group": "zabbix", "invocation": {"module_args": {"backup": false, "content": null, "delimiter": null, "dest": "/etc/zabbix/zabbix_agentd.conf", "directory_mode": null, "follow": true, "force": true, "group": "zabbix", "mode": 420, "original_basename": "zabbix_agentd.conf.j2", "owner": "zabbix", "regexp": null, "remote_src": null, "selevel": null, "serole": null, "setype": null, "seuser": null, "src": "/home/sshadmin/.ansible/tmp/ansible-tmp-1491136130.7-110439525522440/source", "validate": null}}, "md5sum": "b271837ea64eccdca156015360b1fbcd", "mode": "0644", "owner": "zabbix", "secontext": "system_u:object_r:etc_t:s0", "size": 6621, "src": "/home/sshadmin/.ansible/tmp/ansible-tmp-1491136130.7-110439525522440/source", "state": "file", "uid": 1001}
2017-04-02 17:58:54,089 p=17840 u=root |  TASK [zabbix : Add entry to /etc/rc.local] *************************************
2017-04-02 17:58:54,090 p=17840 u=root |  task path: /root/tst1/step10/roles/zabbix/tasks/main.yml:70
2017-04-02 17:58:56,023 p=17840 u=root |  ok: [ragnar01] => {"backup": "", "changed": false, "invocation": {"module_args": {"backrefs": false, "backup": false, "content": null, "create": false, "delimiter": null, "dest": "/etc/rc.local", "destfile": "/etc/rc.local", "directory_mode": null, "follow": false, "force": null, "group": null, "insertafter": null, "insertbefore": null, "line": "/usr/local/bin/zabagentstart", "mode": null, "owner": null, "regexp": null, "remote_src": null, "selevel": null, "serole": null, "setype": null, "seuser": null, "src": null, "state": "present", "validate": null}, "module_name": "lineinfile"}, "msg": ""}
2017-04-02 17:58:56,031 p=17840 u=root |  TASK [zabbix : Start zabbix] ***************************************************
2017-04-02 17:58:56,032 p=17840 u=root |  task path: /root/tst1/step10/roles/zabbix/tasks/main.yml:75
2017-04-02 17:58:58,016 p=17840 u=root |  changed: [ragnar01] => {"changed": true, "cmd": ["/usr/local/sbin/zabbix_agentd", "-c", "/etc/zabbix/zabbix_agentd.conf"], "delta": "0:00:00.069482", "end": "2017-04-02 17:58:56.635333", "invocation": {"module_args": {"_raw_params": "/usr/local/sbin/zabbix_agentd -c /etc/zabbix/zabbix_agentd.conf", "_uses_shell": false, "chdir": null, "creates": null, "executable": null, "removes": null, "warn": true}, "module_name": "command"}, "rc": 0, "start": "2017-04-02 17:58:56.565851", "stderr": "", "stdout": "", "stdout_lines": [], "warnings": []}
2017-04-02 17:58:58,026 p=17840 u=root |  PLAY RECAP *********************************************************************
2017-04-02 17:58:58,027 p=17840 u=root |  ragnar01                   : ok=10   changed=3    unreachable=0    failed=0   
